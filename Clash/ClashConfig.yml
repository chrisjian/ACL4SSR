# ========================
# 1. åŸºç¡€è®¾ç½®
# ========================
port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090

ipv6: true

# ========================
# 2. èŠ‚ç‚¹æº (æ›¿ä»£ Subconverter çš„éƒ¨åˆ†)
# ========================
proxy-providers:
  TAG:
    type: http
    # ã€è¯·åœ¨æ­¤å¤„å¡«å…¥ä½ çš„æœºåœºè®¢é˜…é“¾æ¥ã€‘
    url: ""
    interval: 86400
    health-check:
      enable: true
      interval: 120
      url: http://www.gstatic.com/generate_204
    proxy: DIRECT

  MESL:
    type: http
    # ã€è¯·åœ¨æ­¤å¤„å¡«å…¥ä½ çš„æœºåœºè®¢é˜…é“¾æ¥ã€‘
    url: ""
    interval: 86400
    health-check:
      enable: true
      interval: 120
      url: http://www.gstatic.com/generate_204
    proxy: DIRECT

# ========================
# 3. è‡ªå®šä¹‰èŠ‚ç‚¹ (ä½ çš„ NAT èŠ‚ç‚¹)
# ========================
proxies:
  - name: "ğŸ‡ºğŸ‡¸ å¤å¨å¤·NAT"
    type: vless
    server:         # ã€ä¿®æ”¹ã€‘ä½ çš„ IP
    port:            # ã€ä¿®æ”¹ã€‘ä½ çš„ç«¯å£
    uuid:        # ã€ä¿®æ”¹ã€‘ä½ çš„ UUID
    network: tcp
    tls: true
    udp: true
    flow: xtls-rprx-vision
    servername: www.yahoo.com
    reality-opts:
      public-key:     # ã€ä¿®æ”¹ã€‘ä½ çš„ Public Key
      short-id:       # ã€ä¿®æ”¹ã€‘ä½ çš„ Short ID
    client-fingerprint: chrome
    # é“¾å¼ä»£ç†æŒ‡å‘å‰ç½®ç»„
    dialer-proxy: "ğŸ‡ºğŸ‡¸ å¤å¨å¤·NATå‰ç½®"


# ========================
# 4. ç­–ç•¥ç»„ (å®Œå…¨å¤åˆ»ä½ çš„ INI é€»è¾‘)
# ========================
proxy-groups:
  # --- æ ¸å¿ƒå…¥å£ç»„ ---
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: fallback
    interval: 120
    lazy: false
    proxies: [ä½å€ç‡èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡ºğŸ‡¸ å¤å¨å¤·NAT, DIRECT]

  - name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    include-all: true # å¼•å…¥æœºåœºæ‰€æœ‰èŠ‚ç‚¹

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    # æ’é™¤ç›´è¿ã€æ‹’ç»å’Œé«˜å€ç‡èŠ‚ç‚¹(>=2x)
    filter: '^(?!.*(ç›´è¿|æ‹’ç»))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  # --- é“¾å¼ä»£ç†ä¸“ç”¨å‰ç½®ç»„ ---
  - name: ğŸ‡ºğŸ‡¸ å¤å¨å¤·NATå‰ç½®
    type: fallback
    interval: 120
    lazy: false
    proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾è¥¿èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  # --- åŠŸèƒ½åˆ†ç»„ ---

  - name: ğŸ® GooglePlay
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ’² ç¾å¡
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸ‘¯â€â™‚ï¸ TikTok
    type: select
    proxies: [ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸ¥ å¥ˆé£ç­‰æµåª’ä½“
    type: select
    proxies: [ğŸ¥ å¥ˆé£èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸ¥ å¥ˆé£èŠ‚ç‚¹
    type: select
    include-all: true
    filter: '^(?!.*0\.\d[xX]).*$'  # æ’é™¤ä½å€ç‡èŠ‚ç‚¹

  - name: ğŸ“º å·´å“ˆå§†ç‰¹
    type: select
    proxies: [ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸ“º å“”å“©å“”å“©
    type: select
    proxies: [DIRECT, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹]

  - name: ğŸ’¬ AI
    type: fallback
    interval: 120
    lazy: false
    proxies: [ğŸ‡ºğŸ‡¸ å¤å¨å¤·NAT, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸŒ GoogleæœåŠ¡
    type: fallback
    interval: 120
    lazy: false
    proxies: [ğŸ‡ºğŸ‡¸ å¤å¨å¤·NAT, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸŒ å›½å¤–åª’ä½“
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸ“² æµ·å¤–ç¤¾åª’
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]

  - name: ğŸŒ å›½å†…åª’ä½“
    type: select
    proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ“¢ è°·æ­ŒFCM
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: â“‚ï¸ å¾®è½¯Bing
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: â“‚ï¸ å¾®è½¯äº‘ç›˜
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ¶ ç½‘æ˜“éŸ³ä¹
    type: select
    filter: "(ç½‘æ˜“|éŸ³ä¹|è§£é”|Music|NetEase)"
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]

  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies: [REJECT, DIRECT]

  - name: ğŸƒ åº”ç”¨å‡€åŒ–
    type: select
    proxies: [REJECT, DIRECT]

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹, ğŸŒ å®¶å®½èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  # --- åœ°åŒºåˆ†ç»„ (ä½¿ç”¨ filter æ­£åˆ™è‡ªåŠ¨ç­›é€‰) ---
  - name: ä½å€ç‡èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '(?i)0\.[1-9]x'

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(æ¸¯|HK|hk|Hong Kong|HongKong|hongkong))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡ºğŸ‡² ç¾è¥¿èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(ç¾è¥¿|ç¡…è°·|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|æ—§é‡‘å±±))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: '^(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))(?!.*([2-9](\.\d)?|\d{2,}(\.\d)?)[xX]).*$'

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: "(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“)"

  - name: ğŸ‡²ğŸ‡´ æ¾³é—¨èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 50
    include-all: true
    filter: "(æ¾³é—¨|MO)"

  # æ•´ä½“å®¶å®½æ±‡æ€» (åŒ…å«ä»¥ä¸Šäº”åŒº + å…¶ä»–æ‰€æœ‰å®¶å®½)
  # é‡‡ç”¨ fallback ç­–ç•¥ï¼šæŒ‰é¡ºåºæ‹©ä¼˜ï¼Œè‹¥å‰é¢çš„åœ°åŒºèŠ‚ç‚¹æŒ‚äº†è‡ªåŠ¨åˆ‡æ¢
  - name: "ğŸŒ å®¶å®½èŠ‚ç‚¹"
    type: select
    proxies: ["ğŸ‡¹ğŸ‡¼ å°æ¹¾å®¶å®½", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬å®¶å®½", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å®¶å®½", "ğŸ‡ºğŸ‡¸ ç¾å›½å®¶å®½", "â™»ï¸ å…¶ä»–åœ°åŒºå®¶å®½", "ğŸ‡­ğŸ‡° é¦™æ¸¯å®¶å®½"]

  # é¦™æ¸¯å®¶å®½ (è‡ªåŠ¨é€‰å»¶è¿Ÿæœ€ä½)
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯å®¶å®½"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    include-all: true
    filter: "(?=.*(é¦™æ¸¯|HK|Hong Kong))(?=.*(å®¶å®½|ISP|Residential))"

  # å°æ¹¾å®¶å®½
  - name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾å®¶å®½"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    include-all: true
    filter: "(?=.*(å°æ¹¾|TW|Taiwan|æ–°åŒ—|å°åŒ—))(?=.*(å®¶å®½|ISP|Residential))"

  # æ—¥æœ¬å®¶å®½
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬å®¶å®½"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    include-all: true
    filter: "(?=.*(æ—¥æœ¬|JP|Japan|ä¸œäº¬|å¤§é˜ª))(?=.*(å®¶å®½|ISP|Residential))"

  # ç¾å›½å®¶å®½
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½å®¶å®½"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    include-all: true
    filter: "(?=.*(ç¾å›½|US|United States|æ´›æ‰çŸ¶|çº½çº¦))(?=.*(å®¶å®½|ISP|Residential))"

  # æ–°åŠ å¡å®¶å®½
  - name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å®¶å®½"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 120
    include-all: true
    filter: "(?=.*(æ–°åŠ å¡|SG|Singapore))(?=.*(å®¶å®½|ISP|Residential))"

  # è¾…åŠ©åˆ†ç»„ï¼šç”¨äºæå–é™¤äº†ä¸Šè¿°äº”åŒºä»¥å¤–çš„å®¶å®½èŠ‚ç‚¹
  - name: "â™»ï¸ å…¶ä»–åœ°åŒºå®¶å®½"
    type: select
    include-all: true
    filter: "(?=.*(å®¶å®½|ISP|Residential))"
    # æ’é™¤æ‰å·²å‘½åçš„äº”ä¸ªåœ°åŒº
    exclude-filter: "é¦™æ¸¯|HK|å°æ¹¾|TW|æ—¥æœ¬|JP|ç¾å›½|US|æ–°åŠ å¡|SG"

# ========================
# 5. è§„åˆ™é›† (æ›¿ä»£ Ruleset)
# ========================
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}

rule-providers:
  China / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs"}
  China / IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs"}
  AmericanCard: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/chrisjian/ACL4SSR/master/Clash/AmericanCard.list"}
  CustomDirect: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/chrisjian/ACL4SSR/refs/heads/master/Clash/CustomDirect.list"}
  GooglePlay: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/chrisjian/ACL4SSR/master/Clash/GooglePlay.list"}
  Lan: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list"}
  UnBan: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list"}
  BanAD: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list"}
  BanProgramAD: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list"}
  GoogleFCM: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list"}
  GoogleCN: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list"}
  Bing: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list"}
  OneDrive: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"}
  Microsoft: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list"}
  Apple: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list"}
  # Media
  Telegram / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs"}
  Telegram / IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs"}
  Twitter / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/x.mrs"}
  WhatsApp / Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Whatsapp/Whatsapp.list"}
  Facebook / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs"}
  Reddit / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/reddit.mrs"}
  Amazon / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.mrs"}
  # AI
  OpenAI: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list"}
  Claude: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list"}
  Gemini: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Gemini/Gemini.list"}
  Gemini / Domain: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/google-gemini.mrs"}
  CustomAI: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/chrisjian/ACL4SSR/refs/heads/master/Clash/CustomAI.list"}
  AI_General: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AI.list"}
  # GoogleæœåŠ¡
  Google / Domain: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  Google / IP: {<<: *ip, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  # äº‘éŸ³ä¹
  NetEaseMusic: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/NetEaseMusic.list"}
  # Games
  SteamCN: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list"}
  Epic: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list"}
  Origin: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Origin.list"}
  Sony: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list"}
  Steam: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list"}
  Nintendo: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list"}
  Blizzard / Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list"}
  UBI / Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list"}
  PlayStation / Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/PlayStation/PlayStation.list"}
  # æµåª’ä½“
  YouTube: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  TikTok: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list"}
  Netflix: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
  Spotify: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list"}
  Bahamut: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs"}
  BilibiliHMT: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list"}
  Bilibili: {<<: *domain, url: "https://gh-proxy.com/raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"}
  Disney / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs"}
  HBO / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.mrs"}
  # ChinaMedia: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list"}
  # ProxyMedia: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list"}
  Global / Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"}
  ProxyGFWlist: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list"}
  Private / Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs"}
  # Download: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list"}
  ByteDance: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ByteDance/ByteDance.list"}

# ========================
# 6. è§„åˆ™åŒ¹é… (è·¯ç”±é€»è¾‘)
# ========================
rules:
  - RULE-SET,AmericanCard,ğŸ’² ç¾å¡
  - RULE-SET,CustomDirect,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,GooglePlay,ğŸ® GooglePlay
  - GEOSITE,GOOGLE-PLAY@CN,ğŸ® GooglePlay
  - RULE-SET,Lan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,UnBan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,BanAD,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,BanProgramAD,ğŸƒ åº”ç”¨å‡€åŒ–
  - RULE-SET,GoogleFCM,ğŸ“¢ è°·æ­ŒFCM
  - RULE-SET,GoogleCN,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,SteamCN,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Bing,â“‚ï¸ å¾®è½¯Bing
  - RULE-SET,OneDrive,â“‚ï¸ å¾®è½¯äº‘ç›˜
  - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,Telegram / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,Telegram / IP,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,Twitter / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,WhatsApp / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,Facebook / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,Reddit / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,Amazon / Domain,ğŸ“² æµ·å¤–ç¤¾åª’
  - RULE-SET,YouTube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,TikTok,ğŸ‘¯â€â™‚ï¸ TikTok
  - RULE-SET,Netflix,ğŸ¥ å¥ˆé£ç­‰æµåª’ä½“
  - RULE-SET,Spotify,ğŸ¥ å¥ˆé£ç­‰æµåª’ä½“
  - RULE-SET,Disney / Domain,ğŸ¥ å¥ˆé£ç­‰æµåª’ä½“
  - RULE-SET,HBO / Domain,ğŸ¥ å¥ˆé£ç­‰æµåª’ä½“
  - RULE-SET,OpenAI,ğŸ’¬ AI
  - RULE-SET,Claude,ğŸ’¬ AI
  - RULE-SET,Gemini,ğŸ’¬ AI
  - RULE-SET,Gemini / Domain,ğŸ’¬ AI
  - RULE-SET,CustomAI,ğŸ’¬ AI
  - RULE-SET,AI_General,ğŸ’¬ AI
  - RULE-SET,Google / Domain,ğŸŒ GoogleæœåŠ¡
  - RULE-SET,Google / IP,ğŸŒ GoogleæœåŠ¡
  - RULE-SET,NetEaseMusic,ğŸ¶ ç½‘æ˜“éŸ³ä¹
  - RULE-SET,Epic,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Origin,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Sony,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Nintendo,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,UBI / Domain,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,PlayStation / Domain,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Blizzard / Domain,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Bahamut,ğŸ“º å·´å“ˆå§†ç‰¹
  - RULE-SET,BilibiliHMT,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Global / Domain,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,ProxyGFWlist,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Private / Domain,ğŸ¯ å…¨çƒç›´è¿
  # - RULE-SET,Download,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ByteDance,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,China / Domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,China / IP,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,LAN,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼